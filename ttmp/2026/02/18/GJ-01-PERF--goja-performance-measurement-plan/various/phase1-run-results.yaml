phase: phase-1
generated_at: "2026-02-18T13:49:25Z"
repo_root: .
plan:
    - id: p1-runtime-lifecycle
      title: Runtime Lifecycle
      description: Measure VM spawn and spawn+execute/reuse behavior.
      command: go
      args:
        - test
        - ./perf/goja
        - -run
        - ^$
        - -bench
        - ^(BenchmarkRuntimeSpawn|BenchmarkRuntimeSpawnAndExecute|BenchmarkRuntimeReuse)$
        - -count
        - "3"
        - -benchtime
        - 200ms
        - -benchmem
        - -timeout
        - 15m
      flags:
        bench: ^(BenchmarkRuntimeSpawn|BenchmarkRuntimeSpawnAndExecute|BenchmarkRuntimeReuse)$
        bench-package: ./perf/goja
        benchmem: "true"
        benchtime: 200ms
        count: "3"
        run: ^$
        timeout: 15m
    - id: p1-loading-require
      title: Loading and Require
      description: Measure JS compile/load cost and require cold/warm behavior.
      command: go
      args:
        - test
        - ./perf/goja
        - -run
        - ^$
        - -bench
        - ^(BenchmarkJSLoading|BenchmarkRequireLoading)$
        - -count
        - "3"
        - -benchtime
        - 200ms
        - -benchmem
        - -timeout
        - 15m
      flags:
        bench: ^(BenchmarkJSLoading|BenchmarkRequireLoading)$
        bench-package: ./perf/goja
        benchmem: "true"
        benchtime: 200ms
        count: "3"
        run: ^$
        timeout: 15m
    - id: p1-boundary-calls
      title: Go/JS Boundary Calls
      description: Measure JS->Go and Go->JS call overhead and logging mode deltas.
      command: go
      args:
        - test
        - ./perf/goja
        - -run
        - ^$
        - -bench
        - ^(BenchmarkJSCallingGo|BenchmarkGoCallingJS)$
        - -count
        - "3"
        - -benchtime
        - 200ms
        - -benchmem
        - -timeout
        - 15m
      flags:
        bench: ^(BenchmarkJSCallingGo|BenchmarkGoCallingJS)$
        bench-package: ./perf/goja
        benchmem: "true"
        benchtime: 200ms
        count: "3"
        run: ^$
        timeout: 15m
results:
    - id: p1-runtime-lifecycle
      command: go
      args:
        - test
        - ./perf/goja
        - -run
        - ^$
        - -bench
        - ^(BenchmarkRuntimeSpawn|BenchmarkRuntimeSpawnAndExecute|BenchmarkRuntimeReuse)$
        - -count
        - "3"
        - -benchtime
        - 200ms
        - -benchmem
        - -timeout
        - 15m
      output_file: ttmp/2026/02/18/GJ-01-PERF--goja-performance-measurement-plan/various/phase1-task-output/p1-runtime-lifecycle.txt
      duration_ms: 8648
      success: true
      exit_code: 0
      benchmark_lines:
        - "BenchmarkRuntimeSpawn/GojaNew-8     \t  217708\t      1707 ns/op\t    1760 B/op\t       8 allocs/op"
        - "BenchmarkRuntimeSpawn/GojaNew-8     \t  226978\t      1667 ns/op\t    1760 B/op\t       8 allocs/op"
        - "BenchmarkRuntimeSpawn/GojaNew-8     \t  165823\t      1322 ns/op\t    1760 B/op\t       8 allocs/op"
        - "BenchmarkRuntimeSpawn/EngineNew_NoCallLog-8         \t   10000\t     23265 ns/op\t   11928 B/op\t     140 allocs/op"
        - "BenchmarkRuntimeSpawn/EngineNew_NoCallLog-8         \t    9469\t     24464 ns/op\t   11928 B/op\t     140 allocs/op"
        - "BenchmarkRuntimeSpawn/EngineNew_NoCallLog-8         \t   10000\t     24481 ns/op\t   11928 B/op\t     140 allocs/op"
        - "BenchmarkRuntimeSpawn/EngineNew_WithCallLog-8       \t    1062\t    212207 ns/op\t   17688 B/op\t     321 allocs/op"
        - "BenchmarkRuntimeSpawn/EngineNew_WithCallLog-8       \t     870\t    292732 ns/op\t   17658 B/op\t     321 allocs/op"
        - "BenchmarkRuntimeSpawn/EngineNew_WithCallLog-8       \t    1166\t    282292 ns/op\t   17645 B/op\t     320 allocs/op"
        - "BenchmarkRuntimeSpawnAndExecute/RunString_FreshRuntime-8         \t   10000\t     29107 ns/op\t   14320 B/op\t     189 allocs/op"
        - "BenchmarkRuntimeSpawnAndExecute/RunString_FreshRuntime-8         \t   10000\t     41092 ns/op\t   14320 B/op\t     189 allocs/op"
        - "BenchmarkRuntimeSpawnAndExecute/RunString_FreshRuntime-8         \t    9195\t     31944 ns/op\t   14320 B/op\t     189 allocs/op"
        - "BenchmarkRuntimeSpawnAndExecute/RunProgram_FreshRuntime-8        \t   10000\t     22280 ns/op\t   12216 B/op\t     146 allocs/op"
        - "BenchmarkRuntimeSpawnAndExecute/RunProgram_FreshRuntime-8        \t   10000\t     20801 ns/op\t   12216 B/op\t     146 allocs/op"
        - "BenchmarkRuntimeSpawnAndExecute/RunProgram_FreshRuntime-8        \t   10399\t     22080 ns/op\t   12216 B/op\t     146 allocs/op"
        - "BenchmarkRuntimeReuse/RunString_ReusedRuntime-8                  \t   36726\t      5716 ns/op\t    3328 B/op\t      41 allocs/op"
        - "BenchmarkRuntimeReuse/RunString_ReusedRuntime-8                  \t   33009\t      8833 ns/op\t    3328 B/op\t      41 allocs/op"
        - "BenchmarkRuntimeReuse/RunString_ReusedRuntime-8                  \t   31945\t      7184 ns/op\t    3328 B/op\t      41 allocs/op"
        - "BenchmarkRuntimeReuse/RunProgram_ReusedRuntime-8                 \t  825736\t       245.5 ns/op\t      32 B/op\t       1 allocs/op"
        - "BenchmarkRuntimeReuse/RunProgram_ReusedRuntime-8                 \t 1662034\t       129.7 ns/op\t      32 B/op\t       1 allocs/op"
        - "BenchmarkRuntimeReuse/RunProgram_ReusedRuntime-8                 \t 1953114\t       148.6 ns/op\t      32 B/op\t       1 allocs/op"
        - PASS
    - id: p1-loading-require
      command: go
      args:
        - test
        - ./perf/goja
        - -run
        - ^$
        - -bench
        - ^(BenchmarkJSLoading|BenchmarkRequireLoading)$
        - -count
        - "3"
        - -benchtime
        - 200ms
        - -benchmem
        - -timeout
        - 15m
      output_file: ttmp/2026/02/18/GJ-01-PERF--goja-performance-measurement-plan/various/phase1-task-output/p1-loading-require.txt
      duration_ms: 12146
      success: true
      exit_code: 0
      benchmark_lines:
        - "BenchmarkJSLoading/Compile_small-8         \t    2755\t     75957 ns/op\t   33728 B/op\t     503 allocs/op"
        - "BenchmarkJSLoading/Compile_small-8         \t    3184\t     78643 ns/op\t   33728 B/op\t     503 allocs/op"
        - "BenchmarkJSLoading/Compile_small-8         \t    4687\t     77151 ns/op\t   33728 B/op\t     503 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_small-8         \t    2778\t    121450 ns/op\t   47472 B/op\t     680 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_small-8         \t    3079\t    100362 ns/op\t   47472 B/op\t     680 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_small-8         \t    2084\t    125814 ns/op\t   47474 B/op\t     680 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_small-8       \t   24008\t      9124 ns/op\t    1681 B/op\t      35 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_small-8       \t   22750\t      8968 ns/op\t    1682 B/op\t      35 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_small-8       \t   35986\t      8401 ns/op\t    1681 B/op\t      35 allocs/op"
        - "BenchmarkJSLoading/Compile_medium-8                       \t     171\t   1833162 ns/op\t  495050 B/op\t    7235 allocs/op"
        - "BenchmarkJSLoading/Compile_medium-8                       \t     153\t   1432898 ns/op\t  495050 B/op\t    7235 allocs/op"
        - "BenchmarkJSLoading/Compile_medium-8                       \t     162\t   1466818 ns/op\t  495049 B/op\t    7235 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_medium-8        \t     100\t   2471662 ns/op\t  535556 B/op\t    8358 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_medium-8        \t     156\t   1703320 ns/op\t  535557 B/op\t    8358 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_medium-8        \t     164\t   1782131 ns/op\t  535554 B/op\t    8358 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_medium-8      \t    1747\t    184906 ns/op\t   28738 B/op\t     985 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_medium-8      \t    1915\t    163584 ns/op\t   28713 B/op\t     984 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_medium-8      \t    2174\t    165101 ns/op\t   28681 B/op\t     984 allocs/op"
        - "BenchmarkJSLoading/Compile_large-8                        \t      33\t  10303476 ns/op\t 4443612 B/op\t   57429 allocs/op"
        - "BenchmarkJSLoading/Compile_large-8                        \t      12\t  18449924 ns/op\t 4443624 B/op\t   57429 allocs/op"
        - "BenchmarkJSLoading/Compile_large-8                        \t      27\t  11118936 ns/op\t 4443613 B/op\t   57429 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_large-8         \t      28\t  12066369 ns/op\t 4684826 B/op\t   65720 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_large-8         \t      19\t  11851096 ns/op\t 4684832 B/op\t   65720 allocs/op"
        - "BenchmarkJSLoading/RunString_FreshRuntime_large-8         \t      31\t  10765255 ns/op\t 4684821 B/op\t   65720 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_large-8       \t     182\t   1480097 ns/op\t  253637 B/op\t    8465 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_large-8       \t     190\t   1159812 ns/op\t  252604 B/op\t    8452 allocs/op"
        - "BenchmarkJSLoading/RunProgram_ReusedRuntime_large-8       \t     192\t   1322285 ns/op\t  252361 B/op\t    8448 allocs/op"
        - "BenchmarkRequireLoading/ColdRequire_NewRuntime-8          \t    3410\t    105377 ns/op\t   34344 B/op\t     491 allocs/op"
        - "BenchmarkRequireLoading/ColdRequire_NewRuntime-8          \t    2182\t    140981 ns/op\t   34344 B/op\t     491 allocs/op"
        - "BenchmarkRequireLoading/ColdRequire_NewRuntime-8          \t    1882\t    111537 ns/op\t   34344 B/op\t     491 allocs/op"
        - "BenchmarkRequireLoading/WarmRequire_ReusedRuntime-8       \t  192831\t      1572 ns/op\t     552 B/op\t      10 allocs/op"
        - "BenchmarkRequireLoading/WarmRequire_ReusedRuntime-8       \t  146118\t      1773 ns/op\t     552 B/op\t      10 allocs/op"
        - "BenchmarkRequireLoading/WarmRequire_ReusedRuntime-8       \t  122925\t      2182 ns/op\t     552 B/op\t      10 allocs/op"
        - PASS
    - id: p1-boundary-calls
      command: go
      args:
        - test
        - ./perf/goja
        - -run
        - ^$
        - -bench
        - ^(BenchmarkJSCallingGo|BenchmarkGoCallingJS)$
        - -count
        - "3"
        - -benchtime
        - 200ms
        - -benchmem
        - -timeout
        - 15m
      output_file: ttmp/2026/02/18/GJ-01-PERF--goja-performance-measurement-plan/various/phase1-task-output/p1-boundary-calls.txt
      duration_ms: 8679
      success: true
      exit_code: 0
      benchmark_lines:
        - "BenchmarkJSCallingGo/GoDirect-8         \t493409061\t         0.4242 ns/op\t       0 B/op\t       0 allocs/op"
        - "BenchmarkJSCallingGo/GoDirect-8         \t576040239\t         0.4240 ns/op\t       0 B/op\t       0 allocs/op"
        - "BenchmarkJSCallingGo/GoDirect-8         \t625334113\t         0.8150 ns/op\t       0 B/op\t       0 allocs/op"
        - "BenchmarkJSCallingGo/JS_vm_Set-8        \t  209694\t      1536 ns/op\t     352 B/op\t      12 allocs/op"
        - "BenchmarkJSCallingGo/JS_vm_Set-8        \t  160468\t      1931 ns/op\t     352 B/op\t      12 allocs/op"
        - "BenchmarkJSCallingGo/JS_vm_Set-8        \t  170260\t      2034 ns/op\t     352 B/op\t      12 allocs/op"
        - "BenchmarkJSCallingGo/JS_module_SetExport-8         \t   82104\t      3364 ns/op\t     440 B/op\t      18 allocs/op"
        - "BenchmarkJSCallingGo/JS_module_SetExport-8         \t   83877\t      3371 ns/op\t     440 B/op\t      18 allocs/op"
        - "BenchmarkJSCallingGo/JS_module_SetExport-8         \t  109587\t      3465 ns/op\t     440 B/op\t      18 allocs/op"
        - "BenchmarkGoCallingJS/GoDirect-8                    \t762361024\t         0.2985 ns/op\t       0 B/op\t       0 allocs/op"
        - "BenchmarkGoCallingJS/GoDirect-8                    \t811930258\t         0.2999 ns/op\t       0 B/op\t       0 allocs/op"
        - "BenchmarkGoCallingJS/GoDirect-8                    \t818917596\t         0.3163 ns/op\t       0 B/op\t       0 allocs/op"
        - "BenchmarkGoCallingJS/GojaAssertFunction-8          \t  937369\t       457.4 ns/op\t     160 B/op\t       2 allocs/op"
        - "BenchmarkGoCallingJS/GojaAssertFunction-8          \t  883035\t       461.7 ns/op\t     160 B/op\t       2 allocs/op"
        - "BenchmarkGoCallingJS/GojaAssertFunction-8          \t  445016\t       481.3 ns/op\t     160 B/op\t       2 allocs/op"
        - "BenchmarkGoCallingJS/CallLogCallJSFunction_NoLogger-8         \t  164397\t      1522 ns/op\t     248 B/op\t       8 allocs/op"
        - "BenchmarkGoCallingJS/CallLogCallJSFunction_NoLogger-8         \t  171982\t      1952 ns/op\t     248 B/op\t       8 allocs/op"
        - "BenchmarkGoCallingJS/CallLogCallJSFunction_NoLogger-8         \t  203940\t      1490 ns/op\t     248 B/op\t       8 allocs/op"
        - "BenchmarkGoCallingJS/CallLogCallJSFunction_SqliteLogger-8     \t    4263\t     51178 ns/op\t     971 B/op\t      25 allocs/op"
        - "BenchmarkGoCallingJS/CallLogCallJSFunction_SqliteLogger-8     \t    5332\t     40105 ns/op\t     970 B/op\t      25 allocs/op"
        - "BenchmarkGoCallingJS/CallLogCallJSFunction_SqliteLogger-8     \t    4888\t     48828 ns/op\t     970 B/op\t      25 allocs/op"
        - PASS
summary:
    total_tasks: 3
    successful_tasks: 3
    failed_tasks: 0
    total_duration_ms: 29473
    total_duration_seconds: "29.473"
